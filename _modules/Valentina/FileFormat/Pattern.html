<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Valentina.FileFormat.Pattern &#8212; PyValentina 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../static/jquery.js"></script>
    <script type="text/javascript" src="../../../static/underscore.js"></script>
    <script type="text/javascript" src="../../../static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
   
  <link rel="stylesheet" href="../../../static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for Valentina.FileFormat.Pattern</h1><div class="highlight"><pre>
<span></span><span class="c1">####################################################################################################</span>
<span class="c1">#</span>
<span class="c1"># PyValentina - A Python implementation of Valentina Pattern Drafting Software</span>
<span class="c1"># Copyright (C) 2017 Fabrice Salvaire</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">####################################################################################################</span>

<span class="sd">&quot;&quot;&quot;This module implements the val XML file format and is designed so as to decouple the XML details</span>
<span class="sd">and the calculation API.</span>

<span class="sd">The purpose of each XmlObjectAdaptator sub-classes is to serve as a bidirectional adaptor between</span>
<span class="sd">the XML format and the API.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">####################################################################################################</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="k">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="k">import</span> <span class="n">etree</span>

<span class="kn">from</span> <span class="nn">Valentina.Geometry.Vector</span> <span class="k">import</span> <span class="n">Vector2D</span>
<span class="kn">from</span> <span class="nn">Valentina.Pattern.Measurement</span> <span class="k">import</span> <span class="n">Measurements</span><span class="p">,</span> <span class="n">Measurement</span>
<span class="kn">from</span> <span class="nn">Valentina.Pattern.Pattern</span> <span class="k">import</span> <span class="n">Pattern</span>
<span class="kn">from</span> <span class="nn">Valentina.Xml.Objectivity</span> <span class="k">import</span> <span class="p">(</span><span class="n">BoolAttribute</span><span class="p">,</span>
                                       <span class="n">IntAttribute</span><span class="p">,</span> <span class="n">FloatAttribute</span><span class="p">,</span>
                                       <span class="n">StringAttribute</span><span class="p">,</span>
                                       <span class="n">XmlObjectAdaptator</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">Valentina.Xml.XmlFile</span> <span class="k">import</span> <span class="n">XmlFileMixin</span>
<span class="kn">from</span> <span class="nn">.Measurements</span> <span class="k">import</span> <span class="n">VitFile</span>

<span class="kn">import</span> <span class="nn">Valentina.Pattern.Calculation</span> <span class="k">as</span> <span class="nn">Calculation</span>

<span class="c1">####################################################################################################</span>

<span class="n">_module_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="MxMyMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.MxMyMixin">[docs]</a><span class="k">class</span> <span class="nc">MxMyMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">FloatAttribute</span><span class="p">(</span><span class="s1">&#39;mx&#39;</span><span class="p">),</span>
        <span class="n">FloatAttribute</span><span class="p">(</span><span class="s1">&#39;my&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="CalculationMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationMixin">[docs]</a><span class="k">class</span> <span class="nc">CalculationMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">__calculation__</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="CalculationMixin.call_calculation_function"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationMixin.call_calculation_function">[docs]</a>    <span class="k">def</span> <span class="nf">call_calculation_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>

        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__calculation__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="CalculationMixin.to_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationMixin.to_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">to_calculation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="c1">##############################################</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="CalculationMixin.from_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationMixin.from_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">from_calculation</span><span class="p">(</span><span class="n">calculation</span><span class="p">):</span>

        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="CalculationTypeMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationTypeMixin">[docs]</a><span class="k">class</span> <span class="nc">CalculationTypeMixin</span><span class="p">(</span><span class="n">CalculationMixin</span><span class="p">):</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="CalculationTypeMixin.to_xml"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationTypeMixin.to_xml">[docs]</a>    <span class="k">def</span> <span class="nf">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">return</span> <span class="n">XmlObjectAdaptator</span><span class="o">.</span><span class="n">to_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__type__</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="LinePropertiesMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.LinePropertiesMixin">[docs]</a><span class="k">class</span> <span class="nc">LinePropertiesMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;line_color&#39;</span><span class="p">,</span> <span class="s1">&#39;lineColor&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;line_style&#39;</span><span class="p">,</span> <span class="s1">&#39;typeLine&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">__COLORS__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;black&#39;</span><span class="p">,</span>
        <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cornflowerblue&#39;</span><span class="p">,</span>
        <span class="s1">&#39;darkBlue&#39;</span><span class="p">,</span>
        <span class="s1">&#39;darkGreen&#39;</span><span class="p">,</span>
        <span class="s1">&#39;darkRed&#39;</span><span class="p">,</span>
        <span class="s1">&#39;darkviolet&#39;</span><span class="p">,</span>
        <span class="s1">&#39;deeppink&#39;</span><span class="p">,</span>
        <span class="s1">&#39;deepskyblue&#39;</span><span class="p">,</span>
        <span class="s1">&#39;goldenrod&#39;</span><span class="p">,</span>
        <span class="s1">&#39;green&#39;</span><span class="p">,</span>
        <span class="s1">&#39;lightsalmon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;lime&#39;</span><span class="p">,</span>
        <span class="s1">&#39;mediumseagreen&#39;</span><span class="p">,</span>
        <span class="s1">&#39;orange&#39;</span><span class="p">,</span>
        <span class="s1">&#39;violet&#39;</span><span class="p">,</span>
        <span class="s1">&#39;yellow&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">__LINE_STYLE__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;dashDotDotLine&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dashDotLine&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dashLine&#39;</span><span class="p">,</span>
        <span class="s1">&#39;dotLine&#39;</span><span class="p">,</span>
        <span class="s1">&#39;hair&#39;</span><span class="p">,</span> <span class="c1"># should be solid</span>
        <span class="s1">&#39;none&#39;</span><span class="p">,</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># angle</span>
<span class="c1"># angle1</span>
<span class="c1"># angle2</span>
<span class="c1"># arc</span>
<span class="c1"># axisP1</span>
<span class="c1"># axisP2</span>
<span class="c1"># axisType</span>
<span class="c1"># baseLineP1</span>
<span class="c1"># baseLineP2</span>
<span class="c1"># basePoint</span>
<span class="c1"># c1Center</span>
<span class="c1"># c1Radius</span>
<span class="c1"># c2Center</span>
<span class="c1"># c2Radius</span>
<span class="c1"># cCenter</span>
<span class="c1"># center</span>
<span class="c1"># color</span>
<span class="c1"># cRadius</span>
<span class="c1"># crossPoint</span>
<span class="c1"># curve</span>
<span class="c1"># curve1</span>
<span class="c1"># curve2</span>
<span class="c1"># dartP1</span>
<span class="c1"># dartP2</span>
<span class="c1"># dartP3</span>
<span class="c1"># duplicate</span>
<span class="c1"># firstArc</span>
<span class="c1"># firstPoint</span>
<span class="c1"># hCrossPoint</span>
<span class="c1"># id</span>
<span class="c1"># idObject</span>
<span class="c1"># length</span>
<span class="c1"># length1</span>
<span class="c1"># length2</span>
<span class="c1"># lineColor</span>
<span class="c1"># mx</span>
<span class="c1"># mx1</span>
<span class="c1"># mx2</span>
<span class="c1"># my</span>
<span class="c1"># my1</span>
<span class="c1"># my2</span>
<span class="c1"># name</span>
<span class="c1"># name1</span>
<span class="c1"># name2</span>
<span class="c1"># object (group)</span>
<span class="c1"># p1Line</span>
<span class="c1"># p1Line1</span>
<span class="c1"># p1Line2</span>
<span class="c1"># p2Line</span>
<span class="c1"># p2Line1</span>
<span class="c1"># p2Line2</span>
<span class="c1"># point1</span>
<span class="c1"># point2</span>
<span class="c1"># point3</span>
<span class="c1"># point4</span>
<span class="c1"># pShoulder</span>
<span class="c1"># pSpline</span>
<span class="c1"># radius</span>
<span class="c1"># radius1</span>
<span class="c1"># radius2</span>
<span class="c1"># rotationAngle</span>
<span class="c1"># secondArc</span>
<span class="c1"># secondPoint</span>
<span class="c1"># spline</span>
<span class="c1"># splinePath</span>
<span class="c1"># suffix</span>
<span class="c1"># tangent</span>
<span class="c1"># thirdPoint</span>
<span class="c1"># tool</span>
<span class="c1"># type</span>
<span class="c1"># typeLine</span>
<span class="c1"># vCrossPoint</span>
<span class="c1"># visible (group)</span>
<span class="c1"># x</span>
<span class="c1"># y</span>

<div class="viewcode-block" id="XyMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.XyMixin">[docs]</a><span class="k">class</span> <span class="nc">XyMixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="FirstSecondPointMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.FirstSecondPointMixin">[docs]</a><span class="k">class</span> <span class="nc">FirstSecondPointMixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;first_point&#39;</span><span class="p">,</span> <span class="s1">&#39;firstPoint&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;second_point&#39;</span><span class="p">,</span> <span class="s1">&#39;secondPoint&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="FirstSecondThirdPointMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.FirstSecondThirdPointMixin">[docs]</a><span class="k">class</span> <span class="nc">FirstSecondThirdPointMixin</span><span class="p">(</span><span class="n">FirstSecondPointMixin</span><span class="p">):</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;third_point&#39;</span><span class="p">,</span> <span class="s1">&#39;thirdPoint&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="BasePointMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.BasePointMixin">[docs]</a><span class="k">class</span> <span class="nc">BasePointMixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;base_point&#39;</span><span class="p">,</span> <span class="s1">&#39;basePoint&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="Line1Mixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line1Mixin">[docs]</a><span class="k">class</span> <span class="nc">Line1Mixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;point1_line1&#39;</span><span class="p">,</span> <span class="s1">&#39;p1Line1&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;point2_line1&#39;</span><span class="p">,</span> <span class="s1">&#39;p2Line1&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="Line2Mixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line2Mixin">[docs]</a><span class="k">class</span> <span class="nc">Line2Mixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;point1_line2&#39;</span><span class="p">,</span> <span class="s1">&#39;p1Line2&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;point2_line2&#39;</span><span class="p">,</span> <span class="s1">&#39;p2Line2&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="Line12Mixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line12Mixin">[docs]</a><span class="k">class</span> <span class="nc">Line12Mixin</span><span class="p">(</span><span class="n">Line1Mixin</span><span class="p">,</span> <span class="n">Line2Mixin</span><span class="p">):</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="LengthMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.LengthMixin">[docs]</a><span class="k">class</span> <span class="nc">LengthMixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="AngleMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.AngleMixin">[docs]</a><span class="k">class</span> <span class="nc">AngleMixin</span><span class="p">:</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;angle&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<div class="viewcode-block" id="LengthAngleMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.LengthAngleMixin">[docs]</a><span class="k">class</span> <span class="nc">LengthAngleMixin</span><span class="p">(</span><span class="n">LengthMixin</span><span class="p">,</span> <span class="n">AngleMixin</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="PointMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.PointMixin">[docs]</a><span class="k">class</span> <span class="nc">PointMixin</span><span class="p">(</span><span class="n">CalculationTypeMixin</span><span class="p">,</span> <span class="n">MxMyMixin</span><span class="p">):</span>

    <span class="n">__tag__</span> <span class="o">=</span> <span class="s1">&#39;point&#39;</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="PointMixin.to_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.PointMixin.to_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">to_calculation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;mx&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">))</span> <span class="c1"># id&#39;</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;label_offset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Vector2D</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">my</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_calculation_function</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

    <span class="c1">##############################################</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="PointMixin.from_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.PointMixin.from_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">from_calculation</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">calculation</span><span class="p">):</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">calculation</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;mx&#39;</span><span class="p">,</span> <span class="s1">&#39;my&#39;</span><span class="p">))</span>
        <span class="n">label_offset</span> <span class="o">=</span> <span class="n">calculation</span><span class="o">.</span><span class="n">label_offset</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_offset</span><span class="o">.</span><span class="n">x</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;my&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_offset</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="PointLinePropertiesMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.PointLinePropertiesMixin">[docs]</a><span class="k">class</span> <span class="nc">PointLinePropertiesMixin</span><span class="p">(</span><span class="n">PointMixin</span><span class="p">,</span> <span class="n">LinePropertiesMixin</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="AlongLinePoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.AlongLinePoint">[docs]</a><span class="k">class</span> <span class="nc">AlongLinePoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">FirstSecondPointMixin</span><span class="p">,</span> <span class="n">LengthMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;27&quot; firstPoint=&quot;25&quot; typeLine=&quot;none&quot; mx=&quot;0.1&quot; secondPoint=&quot;26&quot;</span>
    <span class="c1"># length=&quot;-Line_Bt_Ct&quot; name=&quot;Dt&quot; lineColor=&quot;black&quot; type=&quot;alongLine&quot; my=&quot;0.2&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;alongLine&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">AlongLinePoint</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="BissectorPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.BissectorPoint">[docs]</a><span class="k">class</span> <span class="nc">BissectorPoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">FirstSecondThirdPointMixin</span><span class="p">,</span> <span class="n">LengthMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;13&quot; firstPoint=&quot;2&quot; thirdPoint=&quot;5&quot; typeLine=&quot;hair&quot; mx=&quot;0.1&quot; secondPoint=&quot;1&quot;</span>
    <span class="c1"># length=&quot;Line_A_X&quot; name=&quot;B&quot; lineColor=&quot;deepskyblue&quot; type=&quot;bisector&quot; my=&quot;0.2&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;bisector&#39;</span></div>
    <span class="c1"># __calculation__ = Calculation.BissectorPoint</span>

<span class="c1">####################################################################################################</span>

<span class="c1"># __type__ = &#39;curveIntersectAxis&#39;</span>
<span class="c1"># &lt;point id=&quot;68&quot; basePoint=&quot;64&quot; typeLine=&quot;hair&quot; mx=&quot;0.5&quot; name=&quot;Cax1&quot; lineColor=&quot;blue&quot;</span>
<span class="c1"># type=&quot;curveIntersectAxis&quot; angle=&quot;10&quot; curve=&quot;59&quot; my=&quot;-3.1&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;cutArc&#39;</span>
<span class="c1"># &lt;point id=&quot;73&quot; mx=&quot;-3.7&quot; length=&quot;30&quot; arc=&quot;72&quot; name=&quot;Cl3&quot; type=&quot;cutArc&quot; my=&quot;1.4&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;cutSpline&#39;</span>
<span class="c1"># &lt;point id=&quot;54&quot; spline=&quot;53&quot; mx=&quot;0.1&quot; length=&quot;10&quot; name=&quot;Cl1&quot; type=&quot;cutSpline&quot; my=&quot;0.2&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;cutSplinePath&#39;</span>
<span class="c1"># &lt;point id=&quot;60&quot; mx=&quot;0.1&quot; splinePath=&quot;59&quot; length=&quot;20&quot; name=&quot;CI2&quot; type=&quot;cutSplinePath&quot; my=&quot;0.2&quot;/&gt;</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="EndLinePoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.EndLinePoint">[docs]</a><span class="k">class</span> <span class="nc">EndLinePoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">BasePointMixin</span><span class="p">,</span> <span class="n">LengthAngleMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;2&quot; basePoint=&quot;1&quot; typeLine=&quot;hair&quot; mx=&quot;0.1&quot; length=&quot;10&quot; name=&quot;X&quot;</span>
    <span class="c1"># lineColor=&quot;blue&quot; type=&quot;endLine&quot; angle=&quot;360&quot; my=&quot;0.25&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;endLine&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">EndLinePoint</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="HeightPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.HeightPoint">[docs]</a><span class="k">class</span> <span class="nc">HeightPoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">BasePointMixin</span><span class="p">,</span> <span class="n">Line1Mixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;18&quot; basePoint=&quot;7&quot; typeLine=&quot;hair&quot; mx=&quot;0.1&quot; p2Line=&quot;14&quot; name=&quot;P&quot; p1Line=&quot;2&quot;</span>
    <span class="c1"># lineColor=&quot;mediumseagreen&quot; type=&quot;height&quot; my=&quot;0.2&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;height&#39;</span></div>
    <span class="c1"># __calculation__ = Calculation.HeightPoint</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="LineIntersectPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.LineIntersectPoint">[docs]</a><span class="k">class</span> <span class="nc">LineIntersectPoint</span><span class="p">(</span><span class="n">PointMixin</span><span class="p">,</span> <span class="n">Line12Mixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;17&quot; mx=&quot;0.1&quot; p1Line2=&quot;2&quot; p1Line1=&quot;1&quot; name=&quot;I&quot; type=&quot;lineIntersect&quot; my=&quot;0.2&quot;</span>
    <span class="c1"># p2Line1=&quot;12&quot; p2Line2=&quot;14&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;lineIntersect&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">LineIntersectPoint</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="LineIntersectAxisPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.LineIntersectAxisPoint">[docs]</a><span class="k">class</span> <span class="nc">LineIntersectAxisPoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">BasePointMixin</span><span class="p">,</span> <span class="n">Line1Mixin</span><span class="p">,</span> <span class="n">AngleMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;20&quot; basePoint=&quot;14&quot; typeLine=&quot;hair&quot; mx=&quot;0.4&quot; p2Line=&quot;1&quot; name=&quot;AxAn&quot; p1Line=&quot;5&quot;</span>
    <span class="c1"># lineColor=&quot;goldenrod&quot; type=&quot;lineIntersectAxis&quot; angle=&quot;150&quot; my=&quot;-1.8&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;lineIntersectAxis&#39;</span></div>
    <span class="c1"># __calculation__ = Calculation.LineIntersectAxisPoint</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="NormalPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.NormalPoint">[docs]</a><span class="k">class</span> <span class="nc">NormalPoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">FirstSecondPointMixin</span><span class="p">,</span> <span class="n">LengthAngleMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;26&quot; firstPoint=&quot;25&quot; typeLine=&quot;hair&quot; mx=&quot;0.1&quot; secondPoint=&quot;24&quot; length=&quot;5&quot;</span>
    <span class="c1"># name=&quot;Ct&quot; lineColor=&quot;blue&quot; type=&quot;normal&quot; angle=&quot;0&quot; my=&quot;0.1&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;normal&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">NormalPoint</span></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># __type__ = &#39;pointFromArcAndTangent&#39;</span>
<span class="c1"># &lt;point id=&quot;84&quot; tangent=&quot;83&quot; mx=&quot;-1.3&quot; crossPoint=&quot;1&quot; arc=&quot;77&quot; name=&quot;Ctan&quot; type=&quot;pointFromArcAndTangent&quot; my=&quot;1.7&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;pointFromCircleAndTangent&#39;</span>
<span class="c1"># &lt;point id=&quot;81&quot; tangent=&quot;80&quot; mx=&quot;-2.9&quot; cRadius=&quot;3&quot; cCenter=&quot;71&quot; crossPoint=&quot;1&quot; name=&quot;Cp1&quot; type=&quot;pointFromCircleAndTangent&quot; my=&quot;-2.7&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;pointOfContact&#39;</span>
<span class="c1"># &lt;point id=&quot;19&quot; radius=&quot;Line_A_M*3/2&quot; center=&quot;4&quot; firstPoint=&quot;1&quot; mx=&quot;0.1&quot; secondPoint=&quot;5&quot; name=&quot;R&quot; type=&quot;pointOfContact&quot; my=&quot;0.2&quot;/&gt;</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="PointOfIntersection"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.PointOfIntersection">[docs]</a><span class="k">class</span> <span class="nc">PointOfIntersection</span><span class="p">(</span><span class="n">PointMixin</span><span class="p">,</span> <span class="n">FirstSecondPointMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;14&quot; firstPoint=&quot;2&quot; mx=&quot;0.1&quot; secondPoint=&quot;5&quot; name=&quot;XY&quot; type=&quot;pointOfIntersection&quot; my=&quot;0.2&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;pointOfIntersection&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">PointOfIntersection</span></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># __type__ = &#39;pointOfIntersectionArcs&#39;</span>
<span class="c1"># &lt;point id=&quot;78&quot; firstArc=&quot;72&quot; mx=&quot;-1.3&quot; secondArc=&quot;77&quot; crossPoint=&quot;1&quot; name=&quot;Ci2&quot; type=&quot;pointOfIntersectionArcs&quot; my=&quot;2.&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;pointOfIntersectionCircles&#39;</span>
<span class="c1"># &lt;point id=&quot;79&quot; c1Center=&quot;71&quot; mx=&quot;0.1&quot; crossPoint=&quot;1&quot; c1Radius=&quot;15&quot; name=&quot;Ci3&quot; c2Radius=&quot;18&quot;</span>
<span class="c1"># type=&quot;pointOfIntersectionCircles&quot; my=&quot;0.2&quot; c2Center=&quot;76&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;pointOfIntersectionCurves&#39;</span>
<span class="c1"># &lt;point id=&quot;67&quot; mx=&quot;0.9&quot; curve1=&quot;59&quot; vCrossPoint=&quot;1&quot; curve2=&quot;66&quot; hCrossPoint=&quot;1&quot; name=&quot;Ci1&quot;</span>
<span class="c1"># type=&quot;pointOfIntersectionCurves&quot; my=&quot;-3.8&quot;/&gt;</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="ShoulderPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ShoulderPoint">[docs]</a><span class="k">class</span> <span class="nc">ShoulderPoint</span><span class="p">(</span><span class="n">PointLinePropertiesMixin</span><span class="p">,</span> <span class="n">Line1Mixin</span><span class="p">,</span> <span class="n">LengthMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;21&quot; typeLine=&quot;hair&quot; mx=&quot;0.7&quot; p2Line=&quot;14&quot; length=&quot;Line_X_XY*2&quot; pShoulder=&quot;20&quot; name=&quot;Sh&quot;</span>
    <span class="c1"># p1Line=&quot;5&quot; lineColor=&quot;lightsalmon&quot; type=&quot;shoulder&quot; my=&quot;-1.3&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;shoulder&#39;</span>
    <span class="c1"># __calculation__ = Calculation.ShoulderPoint</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;shoulder_point&#39;</span><span class="p">,</span> <span class="s1">&#39;pShoulder&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="SinglePoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.SinglePoint">[docs]</a><span class="k">class</span> <span class="nc">SinglePoint</span><span class="p">(</span><span class="n">PointMixin</span><span class="p">,</span> <span class="n">XyMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;1&quot; mx=&quot;0.1&quot; x=&quot;0.79375&quot; y=&quot;1.05833&quot; name=&quot;A&quot; type=&quot;single&quot; my=&quot;0.2&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;single&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">SinglePoint</span></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># __type__ = &#39;triangle&#39;</span>
<span class="c1"># &lt;point id=&quot;28&quot; axisP2=&quot;25&quot; axisP1=&quot;24&quot; firstPoint=&quot;27&quot; mx=&quot;0.8&quot; secondPoint=&quot;26&quot; name=&quot;T1&quot;</span>
<span class="c1"># type=&quot;triangle&quot; my=&quot;1.4&quot;/&gt;</span>

<span class="c1"># __type__ = &#39;trueDarts&#39;</span>
<span class="c1"># &lt;point id=&quot;44&quot; mx2=&quot;-3.9&quot; baseLineP2=&quot;39&quot; baseLineP1=&quot;38&quot; mx1=&quot;0.2&quot; dartP3=&quot;42&quot; name1=&quot;Td1&quot;</span>
<span class="c1"># dartP2=&quot;41&quot; point2=&quot;46&quot; point1=&quot;45&quot; name2=&quot;Td2&quot; my2=&quot;-0.1&quot; type=&quot;trueDarts&quot; my1=&quot;-2.5&quot;</span>
<span class="c1"># dartP1=&quot;43&quot;/&gt;</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Point"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Point">[docs]</a><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>

    <span class="c1"># We cannot use a metaclass to auto-register due to XmlObjectAdaptator (right ?)</span>
    <span class="n">__TYPES__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;alongLine&#39;</span><span class="p">:</span> <span class="n">AlongLinePoint</span><span class="p">,</span>
        <span class="s1">&#39;bisector&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;curveIntersectAxis&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;cutArc&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;cutSpline&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;cutSplinePath&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;endLine&#39;</span><span class="p">:</span> <span class="n">EndLinePoint</span><span class="p">,</span>
        <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;lineIntersect&#39;</span><span class="p">:</span> <span class="n">LineIntersectPoint</span><span class="p">,</span>
        <span class="s1">&#39;lineIntersectAxis&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;normal&#39;</span><span class="p">:</span> <span class="n">NormalPoint</span><span class="p">,</span>
        <span class="s1">&#39;pointFromArcAndTangent&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pointFromCircleAndTangent&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pointOfContact&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pointOfIntersection&#39;</span><span class="p">:</span> <span class="n">PointOfIntersection</span><span class="p">,</span>
        <span class="s1">&#39;pointOfIntersectionArcs&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pointOfIntersectionCircles&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pointOfIntersectionCurves&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;shoulder&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;single&#39;</span><span class="p">:</span> <span class="n">SinglePoint</span><span class="p">,</span>
        <span class="s1">&#39;triangle&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;trueDarts&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">}</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Line"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line">[docs]</a><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="n">CalculationMixin</span><span class="p">,</span> <span class="n">LinePropertiesMixin</span><span class="p">,</span> <span class="n">FirstSecondPointMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;line id=&quot;47&quot; firstPoint=&quot;38&quot; typeLine=&quot;hair&quot; secondPoint=&quot;45&quot; lineColor=&quot;blue&quot;/&gt;</span>

    <span class="n">__tag__</span> <span class="o">=</span> <span class="s1">&#39;line&#39;</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">Line</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="Line.to_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line.to_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">to_calculation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_calculation_function</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span> <span class="c1"># exclude=(&#39;id&#39;)</span></div>

    <span class="c1">##############################################</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Line.from_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Line.from_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">from_calculation</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">calculation</span><span class="p">):</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">calculation</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="SplineMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.SplineMixin">[docs]</a><span class="k">class</span> <span class="nc">SplineMixin</span><span class="p">(</span><span class="n">CalculationTypeMixin</span><span class="p">):</span>
    <span class="n">__tag__</span> <span class="o">=</span> <span class="s1">&#39;spline&#39;</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="SimpleInteractiveSpline"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.SimpleInteractiveSpline">[docs]</a><span class="k">class</span> <span class="nc">SimpleInteractiveSpline</span><span class="p">(</span><span class="n">SplineMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;spline id=&quot;53&quot; angle2=&quot;138.403&quot; length2=&quot;14.0301&quot; angle1=&quot;329.987&quot; length1=&quot;18.2062&quot;</span>
    <span class="c1"># point4=&quot;52&quot; type=&quot;simpleInteractive&quot; point1=&quot;51&quot; color=&quot;blue&quot;/&gt;</span>

    <span class="n">__type__</span> <span class="o">=</span> <span class="s1">&#39;simpleInteractive&#39;</span>
    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;first_point&#39;</span><span class="p">,</span> <span class="s1">&#39;point1&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;second_point&#39;</span><span class="p">,</span> <span class="s1">&#39;point4&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;length1&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;length2&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;angle1&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;angle2&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;line_color&#39;</span><span class="p">,</span> <span class="s1">&#39;color&#39;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">__calculation__</span> <span class="o">=</span> <span class="n">Calculation</span><span class="o">.</span><span class="n">SimpleInteractiveSpline</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="SimpleInteractiveSpline.to_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.SimpleInteractiveSpline.to_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">to_calculation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_calculation_function</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span> <span class="c1"># exclude=(&#39;id&#39;)</span></div>

    <span class="c1">##############################################</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="SimpleInteractiveSpline.from_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.SimpleInteractiveSpline.from_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">from_calculation</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">calculation</span><span class="p">):</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">calculation</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># &lt;spline id=&quot;57&quot; duplicate=&quot;1&quot; point4=&quot;52&quot; point2=&quot;55&quot; point3=&quot;56&quot; type=&quot;cubicBezier&quot; point1=&quot;51&quot; color=&quot;goldenrod&quot;/&gt;</span>

<span class="c1"># &lt;spline id=&quot;66&quot; type=&quot;cubicBezierPath&quot; color=&quot;deepskyblue&quot;&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;51&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;52&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;58&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;61&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;63&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;64&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint pSpline=&quot;65&quot;/&gt;</span>
<span class="c1"># &lt;/spline&gt;</span>

<span class="c1"># &lt;spline id=&quot;59&quot; type=&quot;pathInteractive&quot; color=&quot;violet&quot;&gt;</span>
<span class="c1">#     &lt;pathPoint angle2=&quot;333.352&quot; length2=&quot;25.9685&quot; length1=&quot;0&quot; angle1=&quot;153.352&quot; pSpline=&quot;51&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint angle2=&quot;82.712&quot; length2=&quot;15.9887&quot; length1=&quot;9.36267&quot; angle1=&quot;262.712&quot; pSpline=&quot;52&quot;/&gt;</span>
<span class="c1">#     &lt;pathPoint angle2=&quot;254.923&quot; length2=&quot;1.78344&quot; length1=&quot;7.70133&quot; angle1=&quot;74.9232&quot; pSpline=&quot;58&quot;/&gt;</span>
<span class="c1"># &lt;/spline&gt;</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Spline"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Spline">[docs]</a><span class="k">class</span> <span class="nc">Spline</span><span class="p">:</span>

    <span class="c1"># We cannot use a metaclass to auto-register due to XmlObjectAdaptator (right ?)</span>
    <span class="n">__TYPES__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;cubicBezier&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;cubicBezierPath&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;pathInteractive&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;simpleInteractive&#39;</span><span class="p">:</span> <span class="n">SimpleInteractiveSpline</span><span class="p">,</span>
    <span class="p">}</span></div>

<span class="c1">####################################################################################################</span>

<span class="c1"># &lt;arc id=&quot;86&quot; radius=&quot;10&quot; center=&quot;83&quot; angle1=&quot;45&quot; length=&quot;30&quot; type=&quot;arcWithLength&quot; color=&quot;black&quot;/&gt;</span>
<span class="c1"># &lt;arc id=&quot;72&quot; radius=&quot;10&quot; angle2=&quot;-30&quot; center=&quot;71&quot; angle1=&quot;30&quot; type=&quot;simple&quot; color=&quot;black&quot;/&gt;</span>
<span class="c1"># __ARC_TYPE__ = (</span>
<span class="c1">#     &#39;arcWithLength&#39;,</span>
<span class="c1">#     &#39;simple&#39;,</span>
<span class="c1">#     )</span>

<span class="c1"># &lt;elArc id=&quot;87&quot; angle2=&quot;300&quot; center=&quot;83&quot; radius2=&quot;15&quot; rotationAngle=&quot;60&quot; radius1=&quot;10&quot; angle1=&quot;30&quot; type=&quot;simple&quot; color=&quot;lime&quot;/&gt;</span>
<span class="c1"># __ELLIPSE_TYPE__ = (</span>
<span class="c1">#     &#39;simple&#39;,</span>
<span class="c1">#     )</span>

<span class="c1"># &lt;operation id=&quot;110&quot; center=&quot;89&quot; suffix=&quot;mir2&quot; axisType=&quot;1&quot; type=&quot;flippingByAxis&quot;&gt;</span>
<span class="c1">#     &lt;source&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;88&quot;/&gt;</span>
<span class="c1">#     &lt;/source&gt;</span>
<span class="c1">#     &lt;destination&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;111&quot; mx=&quot;0.132292&quot; my=&quot;0.264583&quot;/&gt;</span>
<span class="c1">#     &lt;/destination&gt;</span>
<span class="c1"># &lt;/operation&gt;</span>

<span class="c1"># &lt;operation id=&quot;108&quot; suffix=&quot;mir&quot; p2Line=&quot;89&quot; p1Line=&quot;88&quot; type=&quot;flippingByLine&quot;&gt;</span>
<span class="c1">#     &lt;source&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;90&quot;/&gt;</span>
<span class="c1">#     &lt;/source&gt;</span>
<span class="c1">#     &lt;destination&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;109&quot; mx=&quot;0.132292&quot; my=&quot;0.264583&quot;/&gt;</span>
<span class="c1">#     &lt;/destination&gt;</span>
<span class="c1"># &lt;/operation&gt;</span>

<span class="c1"># &lt;operation id=&quot;113&quot; suffix=&quot;mov&quot; length=&quot;15&quot; type=&quot;moving&quot; angle=&quot;160&quot;&gt;</span>
<span class="c1">#     &lt;source&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;88&quot;/&gt;</span>
<span class="c1">#     &lt;/source&gt;</span>
<span class="c1">#     &lt;destination&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;114&quot; mx=&quot;-1.4973&quot; my=&quot;1.56825&quot;/&gt;</span>
<span class="c1">#     &lt;/destination&gt;</span>
<span class="c1"># &lt;/operation&gt;</span>

<span class="c1"># &lt;operation id=&quot;101&quot; center=&quot;94&quot; suffix=&quot;rot&quot; type=&quot;rotation&quot; angle=&quot;30&quot;&gt;</span>
<span class="c1">#     &lt;source&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;88&quot;/&gt;</span>
<span class="c1">#     &lt;/source&gt;</span>
<span class="c1">#     &lt;destination&gt;</span>
<span class="c1">#         &lt;item idObject=&quot;102&quot; mx=&quot;-0.193626&quot; my=&quot;0.738642&quot;/&gt;</span>
<span class="c1">#     &lt;/destination&gt;</span>
<span class="c1"># &lt;/operation&gt;</span>

<span class="c1"># __OPERATION_TYPE__ = (</span>
<span class="c1">#     &#39;flippingByAxis&#39;,</span>
<span class="c1">#     &#39;flippingByLine&#39;,</span>
<span class="c1">#     &#39;moving&#39;,</span>
<span class="c1">#     &#39;rotation&#39;,</span>
<span class="c1"># )</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Dispatcher"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Dispatcher">[docs]</a><span class="k">class</span> <span class="nc">Dispatcher</span><span class="p">:</span>

    <span class="n">__TAGS__</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="Dispatcher.from_xml"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Dispatcher.from_xml">[docs]</a>    <span class="k">def</span> <span class="nf">from_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>

        <span class="n">tag_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__TAGS__</span><span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tag_class</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="CalculationDispatcher"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationDispatcher">[docs]</a><span class="k">class</span> <span class="nc">CalculationDispatcher</span><span class="p">:</span>

    <span class="n">_logger</span> <span class="o">=</span> <span class="n">_module_logger</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="s1">&#39;CalculationDispatcher&#39;</span><span class="p">)</span>

    <span class="n">__TAGS__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;arc&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;ellipse&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="n">Line</span><span class="p">,</span>
        <span class="s1">&#39;operation&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="s1">&#39;point&#39;</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span>
        <span class="s1">&#39;spline&#39;</span><span class="p">:</span> <span class="n">Spline</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_mapping</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_mapper</span><span class="p">()</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_register_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xml_class</span><span class="p">):</span>

        <span class="n">calculation_class</span> <span class="o">=</span> <span class="n">xml_class</span><span class="o">.</span><span class="n">__calculation__</span>
        <span class="k">if</span> <span class="n">calculation_class</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="n">xml_class</span><span class="p">]</span> <span class="o">=</span> <span class="n">calculation_class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="n">calculation_class</span><span class="p">]</span> <span class="o">=</span> <span class="n">xml_class</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_init_mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">tag_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__TAGS__</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">tag_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tag_class</span><span class="p">,</span> <span class="s1">&#39;__TYPES__&#39;</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">xml_class</span> <span class="ow">in</span> <span class="n">tag_class</span><span class="o">.</span><span class="n">__TYPES__</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">xml_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_register_mapping</span><span class="p">(</span><span class="n">xml_class</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_register_mapping</span><span class="p">(</span><span class="n">tag_class</span><span class="p">)</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="CalculationDispatcher.from_xml"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationDispatcher.from_xml">[docs]</a>    <span class="k">def</span> <span class="nf">from_xml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>

        <span class="n">tag_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__TAGS__</span><span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">tag_class</span><span class="p">,</span> <span class="s1">&#39;__TYPES__&#39;</span><span class="p">):</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">tag_class</span><span class="o">.</span><span class="n">__TYPES__</span><span class="p">[</span><span class="n">element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="n">tag_class</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="CalculationDispatcher.from_calculation"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.CalculationDispatcher.from_calculation">[docs]</a>    <span class="k">def</span> <span class="nf">from_calculation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">calculation</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapping</span><span class="p">[</span><span class="n">calculation</span><span class="o">.</span><span class="vm">__class__</span><span class="p">]</span><span class="o">.</span><span class="n">from_calculation</span><span class="p">(</span><span class="n">calculation</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="ModelingItemMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ModelingItemMixin">[docs]</a><span class="k">class</span> <span class="nc">ModelingItemMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;object_id&#39;</span><span class="p">,</span> <span class="s1">&#39;idObject&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;in_use&#39;</span><span class="p">,</span> <span class="s1">&#39;inUse&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">###################################################################################################</span>

<div class="viewcode-block" id="ModelingPoint"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ModelingPoint">[docs]</a><span class="k">class</span> <span class="nc">ModelingPoint</span><span class="p">(</span><span class="n">ModelingItemMixin</span><span class="p">,</span> <span class="n">MxMyMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;point id=&quot;108&quot; idObject=&quot;66&quot; inUse=&quot;true&quot; mx=&quot;0.132292&quot; type=&quot;modeling&quot; my=&quot;0.264583&quot;/&gt;</span>

    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="ModelingSpline"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ModelingSpline">[docs]</a><span class="k">class</span> <span class="nc">ModelingSpline</span><span class="p">(</span><span class="n">ModelingItemMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;spline id=&quot;111&quot; idObject=&quot;107&quot; inUse=&quot;true&quot; type=&quot;modelingSpline&quot;/&gt;</span>

    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="ModelingDispatcher"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ModelingDispatcher">[docs]</a><span class="k">class</span> <span class="nc">ModelingDispatcher</span><span class="p">(</span><span class="n">Dispatcher</span><span class="p">):</span>

    <span class="n">__TAGS__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;point&#39;</span><span class="p">:</span> <span class="n">ModelingPoint</span><span class="p">,</span>
        <span class="s1">&#39;spline&#39;</span><span class="p">:</span> <span class="n">ModelingSpline</span><span class="p">,</span>
        <span class="p">}</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Modeling"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Modeling">[docs]</a><span class="k">class</span> <span class="nc">Modeling</span><span class="p">:</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_map</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_map</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="Modeling.append"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Modeling.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_map</span><span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="Detail"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Detail">[docs]</a><span class="k">class</span> <span class="nc">Detail</span><span class="p">(</span><span class="n">MxMyMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;detail id=&quot;118&quot; version=&quot;2&quot; forbidFlipping=&quot;false&quot; width=&quot;1&quot; united=&quot;false&quot; mx=&quot;0&quot;</span>
    <span class="c1">#  name=&quot;Devant&quot; inLayout=&quot;true&quot; seamAllowance=&quot;true&quot; my=&quot;0&quot;&gt;</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;version&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;forbidFlipping&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;united&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;inLayout&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;seamAllowance&#39;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modeling</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="n">XmlObjectAdaptator</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_modeling</span> <span class="o">=</span> <span class="n">modeling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="Detail.append_node"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Detail.append_node">[docs]</a>    <span class="k">def</span> <span class="nf">append_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="Detail.iter_on_nodes"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.Detail.iter_on_nodes">[docs]</a>    <span class="k">def</span> <span class="nf">iter_on_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modeling</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">object_id</span><span class="p">]</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="VisibleRotationMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.VisibleRotationMixin">[docs]</a><span class="k">class</span> <span class="nc">VisibleRotationMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;visible&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;rotation&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="HeightWidthMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.HeightWidthMixin">[docs]</a><span class="k">class</span> <span class="nc">HeightWidthMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;height&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;width&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="FontSizeMixin"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.FontSizeMixin">[docs]</a><span class="k">class</span> <span class="nc">FontSizeMixin</span><span class="p">:</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;fontSize&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="DetailData"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.DetailData">[docs]</a><span class="k">class</span> <span class="nc">DetailData</span><span class="p">(</span><span class="n">HeightWidthMixin</span><span class="p">,</span> <span class="n">MxMyMixin</span><span class="p">,</span> <span class="n">FontSizeMixin</span><span class="p">,</span> <span class="n">VisibleRotationMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;data letter=&quot;&quot; width=&quot;0&quot; mx=&quot;0&quot; height=&quot;0&quot; fontSize=&quot;0&quot; visible=&quot;false&quot; rotation=&quot;0&quot; my=&quot;0&quot;/&gt;</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;letter&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="DetailPatternInfo"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.DetailPatternInfo">[docs]</a><span class="k">class</span> <span class="nc">DetailPatternInfo</span><span class="p">(</span><span class="n">HeightWidthMixin</span><span class="p">,</span> <span class="n">MxMyMixin</span><span class="p">,</span> <span class="n">FontSizeMixin</span><span class="p">,</span> <span class="n">VisibleRotationMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;patternInfo width=&quot;0&quot; mx=&quot;0&quot; height=&quot;0&quot; fontSize=&quot;0&quot; visible=&quot;false&quot; rotation=&quot;0&quot; my=&quot;0&quot;/&gt;</span>

    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="DetailGrainline"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.DetailGrainline">[docs]</a><span class="k">class</span> <span class="nc">DetailGrainline</span><span class="p">(</span><span class="n">MxMyMixin</span><span class="p">,</span> <span class="n">VisibleRotationMixin</span><span class="p">,</span> <span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;grainline arrows=&quot;0&quot; mx=&quot;0&quot; length=&quot;0&quot; visible=&quot;false&quot; rotation=&quot;90&quot; my=&quot;0&quot;/&gt;</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;arrows&#39;</span><span class="p">),</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="DetailNode"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.DetailNode">[docs]</a><span class="k">class</span> <span class="nc">DetailNode</span><span class="p">(</span><span class="n">XmlObjectAdaptator</span><span class="p">):</span>

    <span class="c1"># &lt;node idObject=&quot;108&quot; type=&quot;NodePoint&quot;/&gt;</span>
    <span class="c1"># &lt;node idObject=&quot;120&quot; reverse=&quot;1&quot; type=&quot;NodeSpline&quot;/&gt;</span>

    <span class="n">__attributes__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">IntAttribute</span><span class="p">(</span><span class="s1">&#39;object_id&#39;</span><span class="p">,</span> <span class="s1">&#39;idObject&#39;</span><span class="p">),</span>
        <span class="n">StringAttribute</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">),</span>
        <span class="n">BoolAttribute</span><span class="p">(</span><span class="s1">&#39;reverse&#39;</span><span class="p">),</span>
    <span class="p">)</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="DetailDispatcher"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.DetailDispatcher">[docs]</a><span class="k">class</span> <span class="nc">DetailDispatcher</span><span class="p">(</span><span class="n">Dispatcher</span><span class="p">):</span>

    <span class="n">__TAGS__</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;grainline&#39;</span><span class="p">:</span> <span class="n">DetailGrainline</span><span class="p">,</span>
        <span class="s1">&#39;patternInfo&#39;</span><span class="p">:</span> <span class="n">DetailPatternInfo</span><span class="p">,</span>
        <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="n">DetailData</span><span class="p">,</span>
        <span class="p">}</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="ValFile"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ValFile">[docs]</a><span class="k">class</span> <span class="nc">ValFile</span><span class="p">(</span><span class="n">XmlFileMixin</span><span class="p">):</span>

    <span class="n">_logger</span> <span class="o">=</span> <span class="n">_module_logger</span><span class="o">.</span><span class="n">getChild</span><span class="p">(</span><span class="s1">&#39;ValFile&#39;</span><span class="p">)</span>

    <span class="n">_calculation_dispatcher</span> <span class="o">=</span> <span class="n">CalculationDispatcher</span><span class="p">()</span>
    <span class="n">_modeling_dispatcher</span> <span class="o">=</span> <span class="n">ModelingDispatcher</span><span class="p">()</span>
    <span class="n">_detail_dispatcher</span> <span class="o">=</span> <span class="n">DetailDispatcher</span><span class="p">()</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="c1"># Fixme: path</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">XmlFileMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Fixme:</span>
        <span class="c1"># if path is not None:</span>
        <span class="k">if</span> <span class="n">path</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_read</span><span class="p">()</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="ValFile.Write"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ValFile.Write">[docs]</a>    <span class="k">def</span> <span class="nf">Write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">vit_file</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>

        <span class="c1"># Fixme: write</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span> <span class="o">=</span> <span class="n">vit_file</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span> <span class="o">=</span> <span class="n">pattern</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">path</span><span class="p">)</span></div>

    <span class="c1">##############################################</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">measurements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span><span class="o">.</span><span class="n">measurements</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pattern</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;</span>
        <span class="c1"># &lt;pattern&gt;</span>
        <span class="c1">#     &lt;!--Pattern created with Valentina (http://www.valentina-project.org/).--&gt;</span>
        <span class="c1">#     &lt;version&gt;0.4.0&lt;/version&gt;</span>
        <span class="c1">#     &lt;unit&gt;cm&lt;/unit&gt;</span>
        <span class="c1">#     &lt;author/&gt;</span>
        <span class="c1">#     &lt;description/&gt;</span>
        <span class="c1">#     &lt;notes/&gt;</span>
        <span class="c1">#     &lt;measurements/&gt;</span>
        <span class="c1">#     &lt;increments/&gt;</span>
        <span class="c1">#     &lt;draw name=&quot;Pattern piece 1&quot;&gt;</span>
        <span class="c1">#         &lt;calculation/&gt;</span>
        <span class="c1">#         &lt;modeling/&gt;</span>
        <span class="c1">#         &lt;details/&gt;</span>
        <span class="c1">#         &lt;groups/&gt;</span>
        <span class="c1">#     &lt;/draw&gt;</span>
        <span class="c1"># &lt;/pattern&gt;</span>

        <span class="n">tree</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse</span><span class="p">()</span>

        <span class="n">measurements_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_xpath_element</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;measurements&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">measurements_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">measurements_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="n">measurements_path</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">measurements_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">NameError</span><span class="p">(</span><span class="s2">&quot;Cannot find </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">measurements_path</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span> <span class="o">=</span> <span class="n">VitFile</span><span class="p">(</span><span class="n">measurements_path</span><span class="p">)</span>

        <span class="n">unit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xpath_element</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

        <span class="n">pattern</span> <span class="o">=</span> <span class="n">Pattern</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span><span class="o">.</span><span class="n">measurements</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span> <span class="o">=</span> <span class="n">pattern</span>

        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xpath_element</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;draw/calculation&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">xml_calculation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculation_dispatcher</span><span class="o">.</span><span class="n">from_xml</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                <span class="n">xml_calculation</span><span class="o">.</span><span class="n">to_calculation</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Not implemented calculation</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span>  <span class="nb">str</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">element</span><span class="p">)))</span>

        <span class="n">pattern</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>

        <span class="n">modeling</span> <span class="o">=</span> <span class="n">Modeling</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xpath_element</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;draw/modeling&#39;</span><span class="p">):</span>
            <span class="n">xml_modeling_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modeling_dispatcher</span><span class="o">.</span><span class="n">from_xml</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
            <span class="n">modeling</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xml_modeling_item</span><span class="p">)</span>
            <span class="c1"># print(xml_modeling_item)</span>

        <span class="n">details</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">detail_element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_xpath_element</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="s1">&#39;draw/details&#39;</span><span class="p">):</span>
            <span class="n">xml_detail</span> <span class="o">=</span> <span class="n">Detail</span><span class="p">(</span><span class="n">modeling</span><span class="p">,</span> <span class="n">detail_element</span><span class="p">)</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xml_detail</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">xml_detail</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">detail_element</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;nodes&#39;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">element</span><span class="p">:</span>
                        <span class="n">xml_node</span> <span class="o">=</span> <span class="n">DetailNode</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
                        <span class="c1"># print(xml_node)</span>
                        <span class="n">xml_detail</span><span class="o">.</span><span class="n">append_node</span><span class="p">(</span><span class="n">xml_node</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">xml_modeling_item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detail_dispatcher</span><span class="o">.</span><span class="n">from_xml</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
                    <span class="c1"># Fixme: xml_detail. = xml_modeling_item</span>
                    <span class="c1"># print(xml_modeling_item)</span>
            <span class="k">for</span> <span class="n">node</span><span class="p">,</span> <span class="n">modeling_item</span> <span class="ow">in</span> <span class="n">xml_detail</span><span class="o">.</span><span class="n">iter_on_nodes</span><span class="p">():</span>
                <span class="c1"># print(node.object_id, &#39;-&gt;&#39;, modeling_item, &#39;-&gt;&#39;, modeling_item.object_id)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s1">&#39;-&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">modeling_item</span><span class="p">,</span> <span class="s1">&#39;-&gt;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">.</span><span class="n">get_calculation</span><span class="p">(</span><span class="n">modeling_item</span><span class="o">.</span><span class="n">object_id</span><span class="p">))</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="ValFile.write"><a class="viewcode-back" href="../../../api/Valentina/FileFormat/Pattern.html#Valentina.FileFormat.Pattern.ValFile.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

        <span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">Element</span><span class="p">(</span><span class="s1">&#39;pattern&#39;</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">Comment</span><span class="p">(</span><span class="s1">&#39;Pattern created with PyValentina (https://github.com/FabriceSalvaire/PyValentina)&#39;</span><span class="p">))</span>

        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;version&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;0.4.0&#39;</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;unit&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span><span class="o">.</span><span class="n">unit</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;author&#39;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;notes&#39;</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;measurements&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vit_file</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;increments&#39;</span><span class="p">)</span>

        <span class="n">draw_element</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s1">&#39;draw&#39;</span><span class="p">)</span> <span class="c1"># Fixme:</span>
        <span class="n">draw_element</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Pattern piece 1&#39;</span> <span class="c1"># Fixme:</span>

        <span class="n">calculation_element</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">draw_element</span><span class="p">,</span> <span class="s1">&#39;calculation&#39;</span><span class="p">)</span>
        <span class="n">modeling_element</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">draw_element</span><span class="p">,</span> <span class="s1">&#39;modeling&#39;</span><span class="p">)</span>
        <span class="n">details_element</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">SubElement</span><span class="p">(</span><span class="n">draw_element</span><span class="p">,</span> <span class="s1">&#39;details&#39;</span><span class="p">)</span>
        <span class="c1"># group_element = etree.SubElement(draw_element, &#39;groups&#39;)</span>

        <span class="k">for</span> <span class="n">calculation</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pattern</span><span class="o">.</span><span class="n">calculations</span><span class="p">:</span>
            <span class="n">xml_calculation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculation_dispatcher</span><span class="o">.</span><span class="n">from_calculation</span><span class="p">(</span><span class="n">calculation</span><span class="p">)</span>
            <span class="c1"># print(xml_calculation)</span>
            <span class="c1"># print(xml_calculation.to_xml_string())</span>
            <span class="n">calculation_element</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xml_calculation</span><span class="o">.</span><span class="n">to_xml</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="c1"># ElementTree.write() ?</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">etree</span><span class="o">.</span><span class="n">tostring</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Fabrice Salvaire.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>